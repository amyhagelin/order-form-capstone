<!DOCTYPE html>
<html>
<head>
	<title>View Order</title>
	<link rel="stylesheet" type="text/css" href="main.css">
	<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
</head>
<body>
<div id="order"></div>
</body>
<script
		src="https://code.jquery.com/jquery-3.1.1.min.js"
		integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
		crossorigin="anonymous"></script>
	<script type="text/javascript">
		$(function() {
			
			function renderOrder(data) {
				// TODO format date properly

				console.log("data" + data);

				var orderHTML = '<table class="single-order-table"><thead><tr><th>Item</th>' +
				'<th>Data</th></thead><tbody>' + 
				'<tr><td>Name:</td><td>' + data.name + '</td></tr>' +
				'<tr><td>Email: </td><td>' + data.email + '</td></tr>' +
				'<tr><td>Pick-up Date: </td><td>' + data.pickupDate + '</td></tr>' +
				'<tr><td>Pick-up Time: </td><td>' + data.pickupTime + '</td></tr>' +
				'<tr><td>Cake Servings: </td><td>' + data.cakeServings + '</td></tr>' +
				'<tr><td>Cupcake Servings: </td><td>' + data.cupcakeServings + '</td></tr>' +
				'<tr><td>Cake Flavor: </td><td>' + data.cakeFlavor + '</td></tr>' +
				'<tr><td>Frosting Flavor: </td><td>' + data.frostingFlavor + '</td></tr>' +
				'<tr><td>Decoration: </td><td>' + data.decoration + '</td></tr>' +
				'<tr><td>Message: </td><td>' + data.message + '</td></tr>' +
				'<tr><td>Requests: </td><td>' + data.requests + '</td></tr>' +
				'<tr><td>Date Order Submitted: </td><td>' + data.submissionDate + '</td></tr>' +
				'<tr><td>Assigned To: </td><td>' + data.assignedTo + '</td></tr>'
				+ '</tbody></table>';

				 $('#order').html(orderHTML);

				// var table = '<table><thead><tr><th>Item</th><th>Data</th>' + 
				// '</thead><tbody>' + orderHTML.join('') + '</tbody></table>';

				// $('#orders').html(table)

			}

			var queryParam = window.location.search.replace('?', '').split('=');
			var queryParamName = queryParam[0];
			var queryParamValue = queryParam[1];
			
			if (queryParamName === 'id' && queryParamValue) {
				$.ajax({
				  url: "/orders/" + queryParamValue,
				  method: "GET",
				  contentType: "application/json"
				})
				.done(function(data) {
					renderOrder(data);
				})
			}
		})


	</script>
</html>